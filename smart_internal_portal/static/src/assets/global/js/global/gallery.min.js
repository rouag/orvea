"use strict";var Shuffle=window.shuffle,Demo=function(e){this.element=e,this.addShuffleEventListeners(),this.shuffle=new Shuffle(e,{itemSelector:".picture-item",sizer:e.querySelector(".my-sizer-element")}),this._activeFilters=[],this.addFilterButtons(),this.addSorting(),this.addSearchFilter(),this.mode="exclusive"};Demo.prototype.toArray=function(e){return Array.prototype.slice.call(e)},Demo.prototype.toggleMode=function(){"additive"===this.mode?this.mode="exclusive":this.mode="additive"},Demo.prototype.addShuffleEventListeners=function(){var e=function(e){console.log("type: %s",e.type,"detail:",e.detail)};this.element.addEventListener(Shuffle.EventType.LAYOUT,e,!1),this.element.addEventListener(Shuffle.EventType.REMOVED,e,!1)},Demo.prototype.addFilterButtons=function(){var e=document.querySelector(".filter-options");if(e){var t=this.toArray(e.children);t.forEach(function(e){e.addEventListener("click",this._handleFilterClick.bind(this),!1)},this)}},Demo.prototype._handleFilterClick=function(e){var t=e.currentTarget,i=t.classList.contains("active"),r=t.getAttribute("data-group");if("additive"===this.mode)i?this._activeFilters.splice(this._activeFilters.indexOf(r)):this._activeFilters.push(r),t.classList.toggle("active"),this.shuffle.filter(this._activeFilters);else{this._removeActiveClassFromChildren(t.parentNode);var o;i?(t.classList.remove("active"),o=Shuffle.ALL_ITEMS):(t.classList.add("active"),o=r),this.shuffle.filter(o)}},Demo.prototype._removeActiveClassFromChildren=function(e){for(var t=e.children,i=t.length-1;i>=0;i--)t[i].classList.remove("active")},Demo.prototype.addSorting=function(){var e=document.querySelector(".sort-options");e&&e.addEventListener("change",this._handleSortChange.bind(this))},Demo.prototype._handleSortChange=function(e){function t(e){return e.getAttribute("data-created")}function i(e){return e.getAttribute("data-title").toLowerCase()}var r=e.target.value,o={};"date-created"===r?o={reverse:!0,by:t}:"title"===r&&(o={by:i}),this.shuffle.sort(o)},Demo.prototype.addSearchFilter=function(){var e=document.querySelector(".js-shuffle-search");e&&e.addEventListener("keyup",this._handleSearchKeyup.bind(this))},Demo.prototype._handleSearchKeyup=function(e){var t=e.target.value.toLowerCase();this.shuffle.filter(function(e,i){if(i.group!==Shuffle.ALL_ITEMS){var r=JSON.parse(e.getAttribute("data-groups")),o=r.indexOf(i.group)!==-1;if(!o)return!1}var n=e.querySelector(".picture-item__title"),s=n.textContent.toLowerCase().trim();return s.indexOf(t)!==-1})},document.addEventListener("DOMContentLoaded",function(){window.demo=new Demo(document.getElementById("grid"))});