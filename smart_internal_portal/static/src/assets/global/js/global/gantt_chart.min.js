"use strict";angular.module("angularGanttDemoApp",["gantt","gantt.sortable","gantt.movable","gantt.drawtask","gantt.tooltips","gantt.bounds","gantt.progress","gantt.table","gantt.tree","gantt.groups","gantt.dependencies","gantt.overlap","gantt.resizeSensor","ngAnimate","mgcrea.ngStrap"]).config(["$compileProvider",function(e){e.debugInfoEnabled(!1)}]),angular.module("angularGanttDemoApp").controller("MainCtrl",["$scope","$timeout","$log","ganttUtils","GanttObjectModel","Sample","ganttMouseOffset","ganttDebounce","moment",function(e,n,o,t,a,s,r,i,l){var c,d,m=function(e,n,t){void 0!==n&&o.info("[Event] api.on.scroll: "+e+", "+(void 0===n?"undefined":n.format())+", "+t)},u=function(e){o.info("[Event] "+e)},f=function(e,n){o.info("[Event] "+e+": "+n.model.name)},g=function(e,n){o.info("[Event] "+e+": "+n.model.name)},w=function(e,n){o.info("[Event] "+e+": "+n.model.name)},k=function(e,n){o.info("[Event] "+e+": "+n)},p=function(e,n){o.info("[Event] columns.on.generate: "+e.length+" column(s), "+n.length+" header(s)")},v=function(e,n){o.info("[Event] rows.on.filter: "+n.length+"/"+e.length+" rows displayed.")},D=function(e,n){o.info("[Event] tasks.on.filter: "+n.length+"/"+e.length+" tasks displayed.")},h=function(){o.info("[Event] core.on.ready")},C=function(e,n){return function(o){return n(e,o)}};e.options={mode:"custom",scale:"day",sortMode:void 0,sideMode:"TreeTable",daily:!1,maxHeight:!1,width:!1,zoom:1,columns:["model.name","from","to"],treeTableColumns:["from","to"],columnsHeaders:{"model.name":"Name",from:"From",to:"To"},columnsClasses:{"model.name":"gantt-column-name",from:"gantt-column-from",to:"gantt-column-to"},columnsFormatters:{from:function(e){return void 0!==e?e.format("lll"):void 0},to:function(e){return void 0!==e?e.format("lll"):void 0}},treeHeaderContent:'<i class="fa fa-align-justify"></i> {{getHeader()}}',columnsHeaderContents:{"model.name":'<i class="fa fa-align-justify"></i> {{getHeader()}}',from:'<i class="fa fa-calendar"></i> {{getHeader()}}',to:'<i class="fa fa-calendar"></i> {{getHeader()}}'},autoExpand:"none",taskOutOfRange:"truncate",fromDate:l(null),toDate:void 0,rowContent:'<i class="fa fa-align-justify"></i> {{row.model.name}}',taskContent:'<i class="fa fa-tasks"></i> {{task.model.name}}',allowSideResizing:!0,labelsEnabled:!0,currentDate:"line",currentDateValue:new Date(2013,9,23,11,20,0),draw:!1,readOnly:!1,groupDisplayMode:"group",filterTask:"",filterRow:"",timeFrames:{day:{start:l("8:00","HH:mm"),end:l("20:00","HH:mm"),color:"#ACFFA3",working:!0,"default":!0},noon:{start:l("12:00","HH:mm"),end:l("13:30","HH:mm"),working:!1,"default":!0},closed:{working:!1,"default":!0},weekend:{working:!1},holiday:{working:!1,color:"red",classes:["gantt-timeframe-holiday"]}},dateFrames:{weekend:{evaluator:function(e){return 6===e.isoWeekday()||7===e.isoWeekday()},targets:["weekend"]},"11-november":{evaluator:function(e){return 10===e.month()&&11===e.date()},targets:["holiday"]}},timeFramesWorkingMode:"hidden",timeFramesNonWorkingMode:"visible",columnMagnet:"15 minutes",timeFramesMagnet:!0,dependencies:{enabled:!0,conflictChecker:!0},targetDataAddRowIndex:void 0,canDraw:function(n){var o=0===n.button||1===n.button;return e.options.draw&&!e.options.readOnly&&o},drawTaskFactory:function(){return{id:t.randomUuid(),name:"Drawn task",color:"#AA8833"}},api:function(n){e.api=n,n.core.on.ready(e,function(){n.scroll.on.scroll(e,m),n.core.on.ready(e,h),n.data.on.remove(e,C("data.on.remove",u)),n.data.on.load(e,C("data.on.load",u)),n.data.on.clear(e,C("data.on.clear",u)),n.data.on.change(e,C("data.on.change",u)),n.tasks.on.add(e,C("tasks.on.add",f)),n.tasks.on.change(e,C("tasks.on.change",f)),n.tasks.on.rowChange(e,C("tasks.on.rowChange",f)),n.tasks.on.remove(e,C("tasks.on.remove",f)),n.tasks.on.moveBegin&&(n.tasks.on.moveBegin(e,C("tasks.on.moveBegin",f)),n.tasks.on.moveEnd(e,C("tasks.on.moveEnd",f)),n.tasks.on.resizeBegin(e,C("tasks.on.resizeBegin",f)),n.tasks.on.resizeEnd(e,C("tasks.on.resizeEnd",f))),n.tasks.on.drawBegin&&(n.tasks.on.drawBegin(e,C("tasks.on.drawBegin",f)),n.tasks.on.drawEnd(e,C("tasks.on.drawEnd",f))),n.rows.on.add(e,C("rows.on.add",g)),n.rows.on.change(e,C("rows.on.change",g)),n.rows.on.move(e,C("rows.on.move",g)),n.rows.on.remove(e,C("rows.on.remove",g)),n.side.on.resizeBegin(e,C("labels.on.resizeBegin",k)),n.side.on.resizeEnd(e,C("labels.on.resizeEnd",k)),n.timespans.on.add(e,C("timespans.on.add",w)),n.columns.on.generate(e,p),n.rows.on.filter(e,v),n.tasks.on.filter(e,D),n.data.on.change(e,function(e){void 0===d&&(d=[{id:e[2].id},{id:e[0].id,tasks:[{id:e[0].tasks[0].id},{id:e[0].tasks[3].id}]},{id:e[7].id,tasks:[{id:e[7].tasks[0].id}]}])}),e.load(),n.directives.on["new"](e,function(n,o,t){"ganttTask"===n?(t.bind("click",function(e){e.stopPropagation(),f("task-click",o.task)}),t.bind("mousedown touchstart",function(n){n.stopPropagation(),e.live.row=o.task.row.model,void 0!==o.task.originalModel?e.live.task=o.task.originalModel:e.live.task=o.task.model,e.$digest()})):"ganttRow"===n?(t.bind("click",function(e){e.stopPropagation(),g("row-click",o.row)}),t.bind("mousedown touchstart",function(n){n.stopPropagation(),e.live.row=o.row.model,e.$digest()})):"ganttRowLabel"===n&&(t.bind("click",function(){g("row-label-click",o.row)}),t.bind("mousedown touchstart",function(){e.live.row=o.row.model,e.$digest()}))}),n.tasks.on.rowChange(e,function(n){e.live.row=n.row.model}),c=new a(n)})}},e.handleTaskIconClick=function(e){alert("Icon from "+e.name+" task has been clicked.")},e.handleRowIconClick=function(e){alert("Icon from "+e.name+" row has been clicked.")},e.expandAll=function(){e.api.tree.expandAll()},e.collapseAll=function(){e.api.tree.collapseAll()},e.$watch("options.sideMode",function(o,t){o!==t&&(e.api.side.setWidth(void 0),n(function(){e.api.columns.refresh()}))}),e.canAutoWidth=function(e){return!e.match(/.*?hour.*?/)&&!e.match(/.*?minute.*?/)},e.getColumnWidth=function(n,o,t){if(n||!e.canAutoWidth(o))return o.match(/.*?week.*?/)?150*t:o.match(/.*?month.*?/)?300*t:o.match(/.*?quarter.*?/)?500*t:o.match(/.*?year.*?/)?800*t:40*t},e.load=function(){e.data=s.getSampleData(),d=void 0,e.timespans=s.getSampleTimespans()},e.reload=function(){e.load()},e.remove=function(){e.api.data.remove(d),e.api.dependencies.refresh()},e.clear=function(){e.data=[]},e.addOverlapTaskToTargetRowIndex=function(){var n=parseInt(e.options.targetDataAddRowIndex);if(n){var o=e.data[e.options.targetDataAddRowIndex];if(o&&o.tasks&&o.tasks.length>0){var t=o.tasks[0],a=t.color,s=t.to.toDate(),r=new Date(s);r.setDate(r.getDate()-1);var i=new Date(r);i.setDate(i.getDate()+7),o.tasks.push({name:"Overlapping",from:r,to:i,color:a})}}},e.live={};var F=1e3,b=i(function(n){if(void 0!==n){var o=angular.fromJson(n);c.cleanTask(o);var t=e.live.task;angular.extend(t,o)}},F);e.$watch("live.taskJson",b);var S=i(function(n){if(void 0!==n){var o=angular.fromJson(n);c.cleanRow(o);var t=o.tasks;delete o.tasks,delete o.drawTask;var a=e.live.row;angular.extend(a,o);var s,r,i={};if(void 0!==t){for(s=0,r=t.length;s<r;s++)c.cleanTask(t[s]);for(s=0,r=t.length;s<r;s++)i[t[s].id]=t[s];for(void 0===a.tasks&&(a.tasks=[]),s=a.tasks.length-1;s>=0;s--){var l=a.tasks[s],d=i[l.id];void 0===d?a.tasks.splice(s,1):(c.cleanTask(d),angular.extend(l,d),delete i[l.id])}}else delete a.tasks;angular.forEach(i,function(e){a.tasks.push(e)})}},F);e.$watch("live.rowJson",S),e.$watchCollection("live.task",function(n){e.live.taskJson=angular.toJson(n,!0),e.live.rowJson=angular.toJson(e.live.row,!0)}),e.$watchCollection("live.row",function(n){e.live.rowJson=angular.toJson(n,!0),void 0!==n&&void 0!==n.tasks&&n.tasks.indexOf(e.live.task)<0&&(e.live.task=n.tasks[0])}),e.$watchCollection("live.row.tasks",function(){e.live.rowJson=angular.toJson(e.live.row,!0)})}]),angular.module("angularGanttDemoApp").service("Sample",function(){return{getSampleData:function(){return[{name:"Milestones",height:"3em",sortable:!1,drawTask:!1,classes:"gantt-row-milestone",color:"#45607D",tasks:[{name:"Kickoff",color:"#93C47D",from:"2013-10-07T09:00:00",to:"2013-10-07T10:00:00",data:"Can contain any custom data or object"},{name:"Concept approval",color:"#93C47D",from:new Date(2013,9,18,18,0,0),to:new Date(2013,9,18,18,0,0),est:new Date(2013,9,16,7,0,0),lct:new Date(2013,9,19,0,0,0)},{name:"Development finished",color:"#93C47D",from:new Date(2013,10,15,18,0,0),to:new Date(2013,10,15,18,0,0)},{name:"Shop is running",color:"#93C47D",from:new Date(2013,10,22,12,0,0),to:new Date(2013,10,22,12,0,0)},{name:"Go-live",color:"#93C47D",from:new Date(2013,10,29,16,0,0),to:new Date(2013,10,29,16,0,0)}],data:"Can contain any custom data or object"},{name:"Status meetings",tasks:[{name:"Demo #1",color:"#9FC5F8",from:new Date(2013,9,25,15,0,0),to:new Date(2013,9,25,18,30,0)},{name:"Demo #2",color:"#9FC5F8",from:new Date(2013,10,1,15,0,0),to:new Date(2013,10,1,18,0,0)},{name:"Demo #3",color:"#9FC5F8",from:new Date(2013,10,8,15,0,0),to:new Date(2013,10,8,18,0,0)},{name:"Demo #4",color:"#9FC5F8",from:new Date(2013,10,15,15,0,0),to:new Date(2013,10,15,18,0,0)},{name:"Demo #5",color:"#9FC5F8",from:new Date(2013,10,24,9,0,0),to:new Date(2013,10,24,10,0,0)}]},{name:"Kickoff",movable:{allowResizing:!1},tasks:[{name:"Day 1",color:"#9FC5F8",from:new Date(2013,9,7,9,0,0),to:new Date(2013,9,7,17,0,0),progress:{percent:100,color:"#3C8CF8"},movable:!1},{name:"Day 2",color:"#9FC5F8",from:new Date(2013,9,8,9,0,0),to:new Date(2013,9,8,17,0,0),progress:{percent:100,color:"#3C8CF8"}},{name:"Day 3",color:"#9FC5F8",from:new Date(2013,9,9,8,30,0),to:new Date(2013,9,9,12,0,0),progress:{percent:100,color:"#3C8CF8"}}]},{name:"Create concept",tasks:[{name:"Create concept",priority:20,content:'<i class="fa fa-cog" ng-click="scope.handleTaskIconClick(task.model)"></i> {{task.model.name}}',color:"#F1C232",from:new Date(2013,9,10,8,0,0),to:new Date(2013,9,16,18,0,0),est:new Date(2013,9,8,8,0,0),lct:new Date(2013,9,18,20,0,0),progress:100}]},{name:"Finalize concept",tasks:[{id:"Finalize concept",name:"Finalize concept",priority:10,color:"#F1C232",from:new Date(2013,9,17,8,0,0),to:new Date(2013,9,18,18,0,0),progress:100}]},{name:"Development",children:["Sprint 1","Sprint 2","Sprint 3","Sprint 4"],content:'<i class="fa fa-file-code-o" ng-click="scope.handleRowIconClick(row.model)"></i> {{row.model.name}}'},{name:"Sprint 1",tooltips:!1,tasks:[{id:"Product list view",name:"Product list view",color:"#F1C232",from:new Date(2013,9,21,8,0,0),to:new Date(2013,9,25,15,0,0),progress:25,dependencies:[{to:"Order basket"},{from:"Finalize concept"}]}]},{name:"Sprint 2",tasks:[{id:"Order basket",name:"Order basket",color:"#F1C232",from:new Date(2013,9,28,8,0,0),to:new Date(2013,10,1,15,0,0),dependencies:{to:"Checkout"}}]},{name:"Sprint 3",tasks:[{id:"Checkout",name:"Checkout",color:"#F1C232",from:new Date(2013,10,4,8,0,0),to:new Date(2013,10,8,15,0,0),dependencies:{to:"Login & Signup & Admin Views"}}]},{name:"Sprint 4",tasks:[{id:"Login & Signup & Admin Views",name:"Login & Signup & Admin Views",color:"#F1C232",from:new Date(2013,10,11,8,0,0),to:new Date(2013,10,15,15,0,0),dependencies:[{to:"HW"},{to:"SW / DNS/ Backups"}]}]},{name:"Hosting"},{name:"Setup",tasks:[{id:"HW",name:"HW",color:"#F1C232",from:new Date(2013,10,18,8,0,0),to:new Date(2013,10,18,12,0,0)}]},{name:"Config",tasks:[{id:"SW / DNS/ Backups",name:"SW / DNS/ Backups",color:"#F1C232",from:new Date(2013,10,18,12,0,0),to:new Date(2013,10,21,18,0,0)}]},{name:"Server",parent:"Hosting",children:["Setup","Config"]},{name:"Deployment",parent:"Hosting",tasks:[{name:"Depl. & Final testing",color:"#F1C232",from:new Date(2013,10,21,8,0,0),to:new Date(2013,10,22,12,0,0),classes:"gantt-task-deployment"}]},{name:"Workshop",tasks:[{name:"On-side education",color:"#F1C232",from:new Date(2013,10,24,9,0,0),to:new Date(2013,10,25,15,0,0)}]},{name:"Content",tasks:[{name:"Supervise content creation",color:"#F1C232",from:new Date(2013,10,26,9,0,0),to:new Date(2013,10,29,16,0,0)}]},{name:"Documentation",tasks:[{name:"Technical/User documentation",color:"#F1C232",from:new Date(2013,10,26,8,0,0),to:new Date(2013,10,28,18,0,0)}]}]},getSampleTimespans:function(){return[{from:new Date(2013,9,21,8,0,0),to:new Date(2013,9,25,15,0,0),name:"Sprint 1 Timespan"}]}}});