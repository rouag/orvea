<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>


		<record id="hr_scholarship_form" model="ir.ui.view">
			<field name="name">hr.scholarship.form</field>
			<field name="model">hr.scholarship</field>
			<field name="arch" type="xml">
				<form string="الابتعاث">
					<header>
						<field name="is_started" invisible="1" />
						<field name="state" widget="statusbar"
							statusbar_visible="draft,psm,done,finished,cutoff,cancel" />
						<button name="action_psm" string="إرسال طلب" type="object"
							states="draft" icon="fa-paper-plane" class="oe_inline oe_stat_button"
							confirm="هل أنت متأكد من القيام بهذا الإجراء ؟" />


						<button name="action_done" string="موافق" type="object"
							groups="smart_hr.group_scholarship_manager" states="psm" icon="fa-check"
							class="oe_inline oe_stat_button" confirm="هل أنت متأكد من القيام بهذا الإجراء ؟" />


						<button name="action_refuse" string="رفض" type="object"
							states="psm" groups="smart_hr.group_scholarship_manager" icon="fa-check"
							class="oe_inline oe_stat_button" confirm="هل أنت متأكد من القيام بهذا الإجراء ؟" />


						<button name="action_succeeded" string="نجح" type="object"
							groups="smart_hr.group_scholarship_manager,smart_hr.group_personnel_hr_scholarship"
							states="done" icon="fa-paper-plane" class="oe_inline oe_stat_button" />


						<button name="action_not_succeeded" string="لم ينجح" type="object"
							groups="smart_hr.group_scholarship_manager,smart_hr.group_personnel_hr_scholarship"
							states="done" icon="fa-times" class="oe_inline oe_stat_button"
							confirm="هل أنت متأكد من القيام بهذا الإجراء ؟" />

						<button name="action_cutoff" string=" قطع الابتعاث" type="object"
							states="done" icon="fa-check" class="oe_inline oe_stat_button"
							confirm="هل أنت متأكد من القيام بهذا الإجراء ؟" />

						<button name="action_cancel" string=" الغاءالابتعاث" type="object"
							states="done" icon="fa-check" class="oe_inline oe_stat_button"
							confirm="هل أنت متأكد من القيام بهذا الإجراء ؟" />

						<button name="button_extend" string="تمديد الابتعاث"
							attrs="{'invisible':[('state', 'not in', ['done'])]} " type="object"
							icon="fa-check" class="oe_inline oe_stat_button" />


					</header>
					<sheet>
						<field name="name" invisible="1" />
						<field name="is_extension" invisible="1" />

						<group>
							<group>
								<field name="date" />
								<field name="employee_id"
									options="{'no_create_edit': True,'no_create': True, 'no_quick_create': True}"
									readonly="True" />
								<field name="scholarship_type"
									options="{'no_create_edit': True,'no_create': True, 'no_quick_create': True}"
									attrs="{'readonly':[('is_extension','=',True)]}" />
							</group>
							<group />
						</group>
						<group col="6">
							<field name="date_from" attrs="{'readonly':[('is_extension','=',True)]}" />
							<field name="date_to" />
							<field name="duration" />
						</group>
						<group>
							<field name="salary_percent" />
							<field name="hr_allowance_type_id" widget="many2many_tags" />
						</group>

						<notebook>
							<page string="بيانات الدبلوم">
								<group>
									<group>
										<field name="diplom_type"
											options="{'no_create_edit': True,'no_create': True, 'no_quick_create': True}"
											attrs="{'readonly':[('is_extension','=',True)]}" />
										<field name="diplom_id"
											options="{'no_create_edit': True,'no_create': True, 'no_quick_create': True}"
											attrs="{'readonly':[('is_extension','=',True)]}" />
										<field name="Faculty_id"
											options="{'no_create_edit': True,'no_create': True, 'no_quick_create': True}"
											attrs="{'readonly':[('is_extension','=',True)]}" />
									</group>
									<group></group>
								</group>
							</page>
							<page string="المرفقات">
								<group>
									<group>
										<field name="num_speech" />
										<field name="date_speech" />
										<field name="speech_file" filename="speech_file_name" />
										<field name="speech_file_name" invisible="1" />
									</group>
									<group>
										<field name="acceptance_certificate" filename="acceptance_certificate_name"
											attrs="{'readonly':[('is_extension','=',True)]}" />
										<field name="acceptance_certificate_name" invisible="1" />
										<field name="language_exam" filename="language_exam_file_name"
											attrs="{'readonly':[('is_extension','=',True)]}" />
										<field name="language_exam_file_name" invisible="1" />
									</group>

								</group>
							</page>
							<page string="بيانات الخطاب" attrs="{'invisible':[('is_extension','=',False)]}">
								<group>
									<group>
										<field name="order_source"
											attrs="{'readonly':[('state','=','done')], 'required':[('is_extension','=',True)]}" />
										<field name="order_number"
											attrs="{'readonly':[('state','=','done')], 'required':[('is_extension','=',True)]}" />
										<field name="order_date"
											attrs="{'readonly':[('state','=','done')], 'required':[('is_extension','=',True)]}" />
										<field name="file_decision" filename="file_decision_name"
											attrs="{'readonly':[('state','=','done')], 'required':[('is_extension','=',True)]}" />
										<field name="file_decision_name" invisible="1" />
									</group>
									<group />
								</group>
							</page>
						</notebook>
						<group>
							<field name="note" />
						</group>
						<button style="padding-right:10px," name="%(report_hr_scholarship_extension)d"
							string="طباعة قرار التمديد"
							attrs="{'invisible':['|',('is_extension','=',False),('state','not in',['done','finished'])]}"
							type="action" icon="fa-print" class="oe_inline oe_stat_button" />

					</sheet>
				</form>
			</field>
		</record>


		<record model="ir.ui.view" id="hr_scholarship_form_inherited">
			<field name="model">hr.scholarship</field>
			<field name="inherit_id" ref="smart_hr.hr_scholarship_form" />
			<field name="groups_id"
				eval="[(6, 0, [ref('smart_hr.group_scholarship_manager')]),(6, 0, [ref('smart_hr.group_personnel_hr_scholarship')])]" />
			<field name="arch" type="xml">
				<field name="employee_id" position="attributes">
					<attribute name="readonly">False</attribute>
				</field>
			</field>
		</record>

		<record id="hr_scholarship_tree" model="ir.ui.view">
			<field name="name">hr.scholarship.tree</field>
			<field name="model">hr.scholarship</field>
			<field name="arch" type="xml">
				<tree string="الابتعاث">
					<field name="name" />
					<field name="date" />
					<field name="date_from" />
					<field name="date_to" />
					<field name="duration" />
					<field name="result" />
					<field name="state" />
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_hr_scholarship">
			<field name="name">الابتعاث</field>
			<field name="res_model">hr.scholarship</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>


		<menuitem id="hr_scholarship" name="الابتعاث" parent="hr_root_workflows"
			sequence="67" action="action_hr_scholarship" />

		<record id="hr_scholarship_type_form" model="ir.ui.view">
			<field name="name">hr.scholarship.type.form</field>
			<field name="model">hr.scholarship.type</field>
			<field name="arch" type="xml">
				<form string="انواع الابتعاث">
					<sheet>
						<group>
							<field name="name" />
							<field name="code" />
							<field name="pension_percent" />
							<field name="traveling_family_ticket" />
							<field name="service_duration_needed">
								<tree editable="bottom">
									<field name="diplom_type" />
									<field name="service_duration" />
								</tree>

							</field>
							<field name="note" />
						</group>
					</sheet>
				</form>
			</field>
		</record>

		<record id="hr_scholarship_type_tree" model="ir.ui.view">
			<field name="name">hr.scholarship.type.tree</field>
			<field name="model">hr.scholarship.type</field>
			<field name="arch" type="xml">
				<tree string="انواع الابتعاث">
					<field name="name" />
					<field name="code" />
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_hr_scholarship_type">
			<field name="name">الابتعاث</field>
			<field name="res_model">hr.scholarship.type</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>

		<menuitem id="hr_scholarship_type" name="انواع الابتعاث"
			groups="smart_hr.group_scholarship_manager,smart_hr.group_personnel_hr_scholarship"
			parent="hr_root_workflows_setting" sequence="25"
			action="action_hr_scholarship_type" />
	</data>
</openerp>