<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>
		<!-- Employee Search -->
		<record id="view_search_hr_employee_inherit" model="ir.ui.view">
			<field name="name">hr.employee.search.inherit</field>
			<field name="model">hr.employee</field>
			<field name="inherit_id" ref="hr.view_employee_filter" />
			<field name="arch" type="xml">
				<!-- Add some fields -->
				<xpath expr="//field[@name='name']" position="replace">
					<field name="name" string="الإسم"
						filter_domain="['|','|','|','|',('work_email','ilike',self),('name','ilike',self),('father_name','ilike',self),('grandfather_name','ilike',self),('family_name','ilike',self)]" />
					<filter string="الموظفين العاملين" name="available_employees"
						domain="[('emp_state','=','working'), ('employee_state','!=', 'non_active'), ('employee_state','!=', 'oh'), ('employee_state','!=', 'retired')]" />
					<filter string="مكلف خارجي" name="assigned_employees"
						domain="['|', ('emp_state','=','outside'),('employee_state','=','outside_assignment')]" />
					<filter string="مكفوف اليد" name="suspended_employees"
						domain="['|', ('employee_state','=','oh'),('emp_state','=','suspended')]" />
					<filter string="مطوي قيده" name="suspended_employees"
						domain="['|', ('employee_state','=','retired'),('emp_state','=','terminated')]" />
				</xpath>
				<xpath expr="//field[@name='name']" position="after">
					<field name="number" />
					<field name="identification_id" />
				</xpath>

				<!-- Remove Filters -->
				<xpath expr="//field[@name='category_ids']" position="replace">
				</xpath>
				<xpath expr="//filter[@name='message_needaction']" position="replace">
				</xpath>
				<xpath expr="//filter[@name='inactive']" position="replace">
				</xpath>
				<xpath expr="//group[@expand='0']//filter[2]" position="replace">
				</xpath>
			</field>
		</record>

		<!-- الموظفون -->

		<record id="view_employee_tree" model="ir.ui.view">
			<field name="name">hr.employee.tree</field>
			<field name="model">hr.employee</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="بيانات موظف">
					<field name="number" />
					<field name="display_name" string="الاسم" />
					<field name="job_id" />
					<field name="state" string="الحضور والإنصراف" />
					<field name="last_sign" string=" تاريخ أخر حضور و إنصراف  " />
					<field name="employee_state" />
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_hr_employee">
			<field name="name">الموظفون</field>
			<field name="res_model">hr.employee</field>
			<field name="view_mode">kanban,tree,form</field>
			<field name="domain">[('employee_state','=','employee')]</field>
			<field name="search_view_id" ref="view_search_hr_employee_inherit" />
			<field name="context">{
				'search_default_available_employees': 1
				}
			</field>
		</record>

		<record id="hr_kanban_view_employees_inherit" model="ir.ui.view">
			<field name="name">hr.employee.kanaban.inherit</field>
			<field name="model">hr.employee</field>
			<field name="type">kanban</field>
			<field name="inherit_id" ref="hr.hr_kanban_view_employees" />
			<field name="arch" type="xml">
				<data>
					<field name="name" position="attributes">
						<attribute name="invisible">1</attribute>
					</field>
					<field name="name" position="after">
						<field name="display_name" />
						<field name="employee_card_id" invisible="1" />
					</field>
					<xpath expr="//div[@class='o_employee_summary_icons']"
						position="replace">

					</xpath>
					<xpath expr="//div[@class='o_kanban_button']" position="replace">
						<div class="o_kanban_button">

							<button name="%(report_hr_employee_card)d" type="action"
								attrs="{'invisible': [('employee_card_id', '=', False)]}" class="o_follow_btn o_following btn btn-sm btn-default">
								<span class="">طباعة</span>
							</button>
						</div>
					</xpath>
				</data>
			</field>
		</record>

		<record id="action_hr_employee_kanban" model="ir.actions.act_window.view">
			<field name="view_mode">kanban</field>
			<field name="view_id" ref="hr_kanban_view_employees_inherit" />
			<field name="act_window_id" ref="action_hr_employee" />
		</record>
		<record id="action_hr_employee_tree" model="ir.actions.act_window.view">
			<field name="view_mode">tree</field>
			<field name="view_id" ref="view_employee_tree" />
			<field name="act_window_id" ref="action_hr_employee" />
		</record>

		<record id="action_hr_employee_form" model="ir.actions.act_window.view">
			<field name="view_mode">form</field>
			<field name="view_id" ref="hr.view_employee_form" />
			<field name="act_window_id" ref="action_hr_employee" />
		</record>

		<menuitem id="hr_employee_menu" name="الموظفون" sequence="1"
			parent="hr_root_employees" action="action_hr_employee" groups="smart_hr.group_employees" />



		<record id="ir_actions_button_my_info" model="ir.actions.server">
			<field name="sequence" eval="5" />
			<field name="state">code</field>
			<field name="type">ir.actions.server</field>
			<field name="model_id" ref="model_hr_employee" />
			<field name="code">action=pool.get('hr.employee').button_my_info(cr,uid,None,)
			</field>
			<field name="condition">True</field>
			<field name="name">بياناتي</field>
		</record>

		<menuitem name="بياناتي" id="hr_employee_mine_menu" parent="hr_root_employees"
			sequence="11" action="ir_actions_button_my_info" />



		<!-- طلبات بيانات موظف -->

		<record id="view_employee_request_tree" model="ir.ui.view">
			<field name="name">hr.employee.request.tree</field>
			<field name="model">hr.employee</field>
			<field name="type">tree</field>
			<field name="inherit_id" ref="hr.view_employee_tree" />
			<field name="arch" type="xml">
				<xpath expr="//tree" position='replace'>
					<tree>
						<field name="display_name" string="الموظف" />
						<field name="number" string="الرقم الوظيفي" />


						<field name="employee_state" string="الحالة" />
					</tree>
				</xpath>
			</field>
		</record>

		<record id="view_employee_request_form" model="ir.ui.view">
			<field name="name">hr.employee.request.form</field>
			<field name="model">hr.employee</field>
			<field name="inherit_id" ref="hr.view_employee_form" />
			<field name="arch" type="xml">
				<xpath expr="/form" position='replace'>
					<form string="طلبات بيانات موظف">
						<header>
							<button name="action_send" string="إرسال للإعتماد" type="object"
								groups="smart_hr.group_employee_request" attrs="{'invisible': [('employee_state', '!=', 'new')]}" />
							<button name="action_confirm" string="موافقة" type="object"
								groups="smart_hr.group_employee_registration" attrs="{'invisible': [('employee_state', '!=', 'waiting')]}" />
							<button name="action_cancel" string="إلغاء" type="object"
								groups="smart_hr.group_employee_request" attrs="{'invisible': [('employee_state', '!=', 'waiting')]}" />
							<button name="%(action_hr_employee_refuse_wizard)d" string="رفض"  type="action"
								groups="smart_hr.group_employee_registration" attrs="{'invisible': [('employee_state', '!=', 'waiting')]}" />
							<field name="employee_state" widget="statusbar"
								attrs="{'invisible': [('employee_state', '=', 'employee')]}"
								statusbar_visible="new,waiting,done,refused" />
							<field name="emp_state"
								attrs="{'invisible': [('employee_state', '!=', 'employee')]}" />
						</header>
						<sheet>
							<field name="is_saudian" invisible="1" />
							<field name="salary_grid_id" invisible="1" />
							<div class="oe_button_box" name="button_box" position="inside">
								<button name="%(smart_hr.action_hr_loan)d" class="oe_stat_button"
									context="{'search_default_employee_id': id}" icon="fa-money"
									type="action">
									<field name="loan_count" widget="statinfo" string="القروض" />
								</button>

								<button name="%(smart_hr.open_view_attendance_inherite)d"
									class="oe_stat_button" context="{'search_default_employee_id': id}"
									icon="fa-clock-o" type="action">
									<span>الحضور </span>
								</button>
								<button name="%(smart_hr.action_hr_holidays)d" class="oe_stat_button"
									context="{'search_default_employee_id': id}" icon="fa-clock-o"
									type="action">
									<field name="holiday_count" widget="statinfo" string="الإجازات" />
								</button>

								<button name="%(hr_contract.act_hr_employee_2_hr_contract)d"
									class="oe_stat_button" icon="fa-book" type="action"
									groups="base.group_hr_manager">
									<field name="contracts_count" widget="statinfo" string="العقود" />
								</button>

							</div>

							<field name="image" widget="image" class="oe_avatar"
								options="{&quot;preview_image&quot;:&quot;image_medium&quot;}" />
							<div class="col-xs-12 div_paddig_right_null">
								<div class="col-xs-3" style="text-align:right;width:23%;">
									<label name="name" string="الاسم" />
								</div>
								<div class="col-xs-3 div_paddig_right_null" style="text-align:right;width:23.5%;">
									<label name="father_name" string="إسم الأب" class="div_paddig_right_null" />
								</div>
								<div class="col-xs-3 div_paddig_right_null" style="text-align:right;width:23%;">
									<label name="grandfather_name" string="اسم الجد" />
								</div>
								<div class="col-xs-2 div_paddig_right_null" style="text-align:right;width:15.5%;">
									<label name="grandfather2_name" string="اسم الجد الثاني" />
								</div>
								<div class="col-xs-1 div_paddig_right_null" style="text-align:right;width:15%;">
									<label name="family_name" string="الاسم العائلي" />
								</div>

							</div>
							<group col="13">
								<field name="name" nolabel="1" colspan="2" />
								<field name="father_middle_name" nolabel="1" />
								<field name="father_name" nolabel="1" colspan="2" />
								<field name="grandfather_middle_name" nolabel="1" />
								<field name="grandfather_name" nolabel="1" colspan="2" />
								<field name="grandfather2_middle_name" nolabel="1" />
								<field name="grandfather2_name" nolabel="1" colspan="2" />
								<field name="family_name" nolabel="1" colspan="2" />
							</group>

							<label for="number" class="oe_edit_only" />
							<h1>
								<field name="number" placeholder="الرقم الوظيفي" class="oe_smart_inline"
									readonly="1" />

							</h1>
							<notebook>
								<page name="public" string="بيانات شخصية">
									<group string="بيانات شخصية">
										<group>
											<field name="country_id" options='{"no_open": True, "no_create": True}'
												attrs="{'required': 1}" domain="[('code_nat','!=',False)]"
												context="{'compute_name': '_get_natinality'}" />

											<field name="identification_id"
												attrs="{'required': [('is_saudian','=', True)],'invisible': [('is_saudian','=', False)]}" />
											<field name="identification_date"
												attrs="{'invisible': [('is_saudian','=', False)]}" />
											<field name="identification_place"
												attrs="{'invisible': [('is_saudian','=', False)]}" />

											<field name="residance_id" string="رقم الإقامة"
												attrs="{'required': [('is_saudian','=', False)],'invisible': [('is_saudian','=', True)]}" />
											<field name="residance_date" string="تاريخ إصدار بطاقة الإقامة"
												attrs="{'invisible': [('is_saudian','=', True)]}" />
											<field name="residance_place" string="مكان إصدار بطاقة الإقامة"
												attrs="{'invisible': [('is_saudian','=', True)]}" />
										</group>
										<group>
											<field name="passport_id" attrs="{'required': [('is_saudian','=', False)]}" />
											<field name="passport_date" attrs="{'required': [('is_saudian','=', False)]}" />
											<field name="passport_end_date" attrs="{'required': [('is_saudian','=', False)]}" />
											<field name="passport_place" attrs="{'required': [('is_saudian','=', False)]}" />
											<field name="is_resident" attrs="{'required': 1}" />
										</group>
									</group>
									<group>
										<group string="الحالة">
											<field name="gender" attrs="{'required': 1}" />
											<field name="religion_state" />
											<field name="marital" attrs="{'required': 1}" />
											<field name="children" />
										</group>
										<group string="الميلاد">
											<field name="birthday" attrs="{'required': 1}" />
											<field name="place_of_birth" />

										</group>
									</group>
									<group string="المرفقات">
										<field name="attachments" widget="many2many_binary"
											nolabel="1" />
									</group>
									<group>
										<field name="notes" placeholder="معلومات أخرى ..." />
									</group>
								</page>
								<page string="بيانات التواصل">
									<group>
										<group string="بيانات التواصل">
											<field name="mobile_phone" attrs="{'required': 1}" />
											<field name="work_location" attrs="{'required': 0}" />
											<field name="work_email" widget="email" attrs="{'required': 1}" />
											<field name="work_phone" string="تحويلة العمل" />
											<field name="coach_id" invisible="1" />
											<field name="manager" groups="base.group_no_one" />
										</group>
									</group>
								</page>
								<page string="مستويات التعليم">
									<field name="education_level_ids">
										<tree>
											<field name="name" />
											<field name="diploma_id" />
											<field name="qualification_id" />
											<field name="specialization_ids" widget="many2many_tags" />
											<field name="diploma_date" />
											<field name="job_specialite" />

										</tree>
									</field>
								</page>
								<page string="بيانات العمل">
									<group>
										<group string="بيانات العمل">
											<field name="department_id" context="{'list_type':'employee_form'}" on_change="onchange_department_id(department_id)" />
											<field name="dep_side" options="{'no_create': True}" />
											<field name="dep_city" options="{'no_create': True}" />
											<field name="job_id"
												attrs="{'readonly': 1, 'invisible': [('employee_state','!=', 'employee')]}" />
											<field name="type_id"
												attrs="{'readonly': 1, 'invisible': [('employee_state','!=', 'employee')]}" />
											<field name="grade_id"
												attrs="{'readonly': 1, 'invisible': [('employee_state','!=', 'employee')]}" />
											<field name="degree_id"
												attrs="{'readonly': 1, 'invisible': [('employee_state','!=', 'employee')]}" />


											<field name="parent_id" string="المدير المباشر " />
											<field name="service_duration" attrs="{'readonly': 1}" />
											<field name="promotion_duration" attrs="{'readonly': 1}" />
											<field name="royal_decree_number" />
											<field name="royal_decree_date" />
											<field name="external_decision" />
											<field name="is_member" />
										</group>
										<group string="خصائص أخرى">
											<field name="user_id"
												attrs="{'readonly': 1, 'invisible': [('employee_state','!=', 'employee')]}" />
											<field name="recruiter" widget="selection" />
											<field name="recruiter_date" />
											<field name="begin_work_date" />
											<field name="calendar_id" />
											<field name="insurance_type" />
											<field name="medic_exam" string="تاريخ الفحص الطبي" />
											<field name="vehicle" />
											<field name="vehicle_distance" />
										</group>
									</group>
								</page>
								<page string="بيانات البنك">

									<group string="بيانات البنك">
										<field name="address_home_id" invisible="1" />
										<field name="bank_account_id" invisible="1" />
										<field name="bank_account_ids" options="{'no_create': True}"
											nolabel="1">
											<tree create="false" delete="false">
												<field name="acc_number" />
												<field name="bank_name" string="البنك" />
												<field name="currency_id" />
												<field name="account_opening_date" />
												<field name="is_deposit" />

											</tree>
										</field>
									</group>

									<group name="active_group" invisible="1" />
								</page>

								<page string="أرصدة الاجازات والترقيات">
									<separator string="أرصدة الاجازات" />
									<field name="holidays_balance"
										domain="[('period_id.date_to','&lt;=',context_today())]">
										<tree string="أرصدة الاجازات ">
											<field name="holiday_status_id" />
											<field name="entitlement_name" />
											<field name="holidays_available_stock" />
											<field name="token_holidays_sum" />
											<field name="periode" />
										</tree>
									</field>
									<group>
										<field name="compensation_stock" readonly="1" class="oe_inline" />
									</group>
									<separator string="سِجل التعيينات" />
									<field name="promotions_history" readonly="1">
										<tree string="سِجل التعيينات">
											<field name="appoint_type" />
											<field name="salary_grid_id" />
											<field name="date_from" />
											<field name="date_to" />
											<field name="balance" />
										</tree>
									</field>

								</page>




								<page string="سجل الاجراءات" readonly='True'>

									<field name='history_ids' readonly="1">
										<tree string="سجل الاجراءات">
											<field name="job_id" />
											<field name="grade_id" />
											<field name="number" />
											<field name="dep_side" />
											<field name="department_id" />
											<field name="type" />
											<field name="date" />
											<field name="num_decision" />
											<field name="date_decision" />
										</tree>
									</field>

								</page>

							</notebook>
						</sheet>
						<div class="oe_chatter">
							<field name="message_follower_ids" widget="mail_followers" />
							<field name="message_ids" widget="mail_thread" />
						</div>
					</form>

				</xpath>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_employee_request">
			<field name="name">طلبات تسجيل موظف</field>
			<field name="res_model">hr.employee</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('employee_state','!=','employee')]</field>
		</record>
		<record id="action_employee_request_tree" model="ir.actions.act_window.view">
			<field name="view_mode">tree</field>
			<field name="view_id" ref="view_employee_request_tree" />
			<field name="act_window_id" ref="action_employee_request" />
		</record>
		<record id="action_employee_request_form" model="ir.actions.act_window.view">
			<field name="view_mode">form</field>
			<field name="view_id" ref="view_employee_request_form" />
			<field name="act_window_id" ref="action_employee_request" />
		</record>

		<menuitem id="employee_request_menu" name="طلبات تسجيل موظف"
			groups="smart_hr.group_employee_request" sequence="2" parent="hr_root_employees"
			action="action_employee_request" />



		<record id="hr_contract.hr_hr_employee_view_form2" model="ir.ui.view">
			<field name="name">hr.hr.employee.view.form2</field>
			<field name="model">hr.employee</field>
			<field name="arch" type="xml">
				<form>

				</form>
			</field>
		</record>
		<record id="hr_appraisal.hr_employee_view_form" model="ir.ui.view">
			<field name="name">hr.employee.view.form.inherit.appraisal</field>
			<field name="model">hr.employee</field>
			<field name="inherit_id" ref="hr.view_employee_form" />
			<field name="arch" type="xml">
				<xpath expr="//div[@name='button_box']" position="inside">
					<button name="%(hr_appraisal.open_view_hr_appraisal_tree2)d"
						class="oe_inline oe_stat_button" icon="fa-sitemap" type="action">
						<field name="appraisal_count" widget="statinfo" />
					</button>
				</xpath>
			</field>
		</record>
	</data>

	<data noupdate="1">
		<!-- Remove odoo buttons -->
		<delete id="hr.hr_employee_action_subordinate_hierachy_mutli"
			model="ir.values" />
	</data>
</openerp>
