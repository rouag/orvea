<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>


		<!-- الموظفون -->

		<record id="view_employee_tree" model="ir.ui.view">
			<field name="name">hr.employee.tree</field>
			<field name="model">hr.employee</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="بيانات موظف">
					<field name="display_name" />
					<field name="number" />
					<field name="employee_state" />
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_hr_employee">
			<field name="name">الموظفون</field>
			<field name="res_model">hr.employee</field>
			<field name="view_mode">kanban,tree,form</field>
			<field name="domain">[('employee_state','=','employee')]</field>
		</record>

		<record id="hr_kanban_view_employees_inherit" model="ir.ui.view">
			<field name="name">hr.employee.kanaban.inherit</field>
			<field name="model">hr.employee</field>
			<field name="type">kanban</field>
			<field name="inherit_id" ref="hr.hr_kanban_view_employees" />
			<field name="arch" type="xml">
				<data>
					<field name="name" position="attributes">
						<attribute name="invisible">1</attribute>
					</field>
					<field name="name" position="after">
						<field name="display_name" />
					</field>
				</data>
			</field>
		</record>

		<record id="action_hr_employee_kanban" model="ir.actions.act_window.view">
			<field name="view_mode">kanban</field>
			<field name="view_id" ref="hr_kanban_view_employees_inherit" />
			<field name="act_window_id" ref="action_hr_employee" />
		</record>
		<record id="action_hr_employee_tree" model="ir.actions.act_window.view">
			<field name="view_mode">tree</field>
			<field name="view_id" ref="view_employee_tree" />
			<field name="act_window_id" ref="action_hr_employee" />
		</record>

		<record id="action_hr_employee_form" model="ir.actions.act_window.view">
			<field name="view_mode">form</field>
			<field name="view_id" ref="hr.view_employee_form" />
			<field name="act_window_id" ref="action_hr_employee" />
		</record>

		<menuitem id="hr_employee_menu" name="الموظفون" sequence="1"
			parent="hr_root_employees" action="action_hr_employee" groups="smart_hr.group_employees" />



		<record id="ir_actions_button_my_info" model="ir.actions.server">
			<field name="sequence" eval="5" />
			<field name="state">code</field>
			<field name="type">ir.actions.server</field>
			<field name="model_id" ref="model_hr_employee" />
			<field name="code">action=pool.get('hr.employee').button_my_info(cr,uid,None,)
			</field>
			<field name="condition">True</field>
			<field name="name">بياناتي</field>
		</record>

		<menuitem name="بياناتي" id="hr_employee_mine_menu" parent="hr_root_employees"
			sequence="11" action="ir_actions_button_my_info" />



		<!-- طلبات بيانات موظف -->

		<record id="view_employee_request_tree" model="ir.ui.view">
			<field name="name">hr.employee.request.tree</field>
			<field name="model">hr.employee</field>
			<field name="type">tree</field>
			<field name="inherit_id" ref="hr.view_employee_tree" />
			<field name="arch" type="xml">
				<xpath expr="/tree" position='replace'>
					<tree string="طلبات بيانات موظف">
						<field name="name" />
						<field name="employee_state" />
					</tree>
				</xpath>
			</field>
		</record>

		<record id="view_employee_request_form" model="ir.ui.view">
			<field name="name">hr.employee.request.form</field>
			<field name="model">hr.employee</field>
			<field name="inherit_id" ref="hr.view_employee_form" />
			<field name="arch" type="xml">
				<xpath expr="/form" position='replace'>
					<form string="طلبات بيانات موظف">
						<header>
							<button name="action_send" string="إرسال للإعتماد" type="object"
								groups="smart_hr.group_employee_request" attrs="{'invisible': [('employee_state', '!=', 'new')]}" />
							<button name="action_confirm" string="موافقة" type="object"
								groups="smart_hr.group_employee_registration" attrs="{'invisible': [('employee_state', '!=', 'waiting')]}" />
							<button name="action_cancel" string="إلغاء" type="object"
								groups="smart_hr.group_employee_request" attrs="{'invisible': [('employee_state', '!=', 'waiting')]}" />
							<button name="action_refuse" string="رفض" type="object"
								groups="smart_hr.group_employee_registration" attrs="{'invisible': [('employee_state', '!=', 'waiting')]}" />
							<field name="employee_state" widget="statusbar"
								statusbar_visible="new,waiting,done,refused" />
						</header>
						<sheet>

							<div class="oe_button_box" name="button_box" position="inside">
								<button name="%(smart_hr.action_hr_loan)d" class="oe_stat_button"
									context="{'search_default_employee_id': id}" icon="fa-money"
									type="action">
									<field name="loan_count" widget="statinfo" string="القروض" />
								</button>

								<button name="%(smart_hr.open_view_attendance_inherite)d"
									class="oe_stat_button" context="{'search_default_employee_id': id}"
									icon="fa-clock-o" type="action">
									<span>الحضور </span>
								</button>
								<button name="%(smart_hr.action_hr_holidays)d" class="oe_stat_button"
									context="{'search_default_employee_id': id}" icon="fa-clock-o"
									type="action">
									<field name="holiday_count" widget="statinfo" string="الإجازات" />
								</button>
							
								<button name="%(hr_contract.act_hr_employee_2_hr_contract)d"
									class="oe_stat_button" icon="fa-book" type="action"
									groups="base.group_hr_manager">
									<field name="contracts_count" widget="statinfo" string="العقود" />
								</button>
							</div>

							<field name="image" widget="image" class="oe_avatar"
								options="{&quot;preview_image&quot;:&quot;image_medium&quot;}" />
							<div class="col-xs-12 div_paddig_right_null">
								<div class="col-xs-3" style="text-align:right;width:23%;">
									<label name="name" string="الاسم" />
								</div>
								<div class="col-xs-3 div_paddig_right_null" style="text-align:right;width:23%;">
									<label name="father_name" string="إسم الأب" />
								</div>
								<div class="col-xs-3 div_paddig_right_null" style="text-align:right;width:23%;">
									<label name="grandfather_name" string="اسم الجد" />
								</div>
								<div class="col-xs-2 div_paddig_right_null" style="text-align:right;width:15.5%;">
									<label name="grandfather2_name" string="اسم الجد الثاني" />
								</div>
								<div class="col-xs-1 div_paddig_right_null" style="text-align:right;width:15.5%;">
									<label name="family_name" string="الاسم العائلي" />
								</div>

							</div>
							<group col="13">
								<field name="id" invisible="1" />
								<field name="name" nolabel="1" colspan="2" />
								<field name="father_middle_name" nolabel="1" />
								<field name="father_name" nolabel="1" colspan="2" />
								<field name="grandfather_middle_name" nolabel="1" />
								<field name="grandfather_name" nolabel="1" colspan="2" />
								<field name="grandfather2_middle_name" nolabel="1" />
								<field name="grandfather2_name" nolabel="1" colspan="2" />
								<field name="family_name" nolabel="1" colspan="2" />
							</group>

							<label for="number" class="oe_edit_only" />
							<h1>
								<field name="number" placeholder="الرقم الوظيفي" attrs="{'required': 1}"
									class="oe_smart_inline" />

							</h1>
							<notebook>
								<page name="public" string="بيانات شخصية">
									<group string="بيانات شخصية">
										<group>
											<field name="country_id" options='{"no_open": True, "no_create": True}'
												attrs="{'required': 1}" />
											<field name="identification_id" attrs="{'required': 1}" />
											<field name="identification_date" />
											<field name="identification_place" />

										</group>
										<group>
											<field name="passport_id" attrs="{'required': 1}" />
											<field name="passport_date" attrs="{'required': 1}" />
											<field name="passport_end_date" attrs="{'required': 1}" />
											<field name="passport_place" attrs="{'required': 1}" />
											<field name="is_resident" attrs="{'required': 1}" />
										</group>
									</group>
									<group>
										<group string="الحالة">
											<field name="gender" attrs="{'required': 1}" />
											<field name="religion_state" />
											<field name="marital" attrs="{'required': 1}" />
											<field name="children" />
										</group>
										<group string="الميلاد">
											<field name="birthday" attrs="{'required': 1}" />
											<field name="place_of_birth" />

										</group>
									</group>
									<group string="المرفقات">
										<field name="attachments" widget="many2many_binary"
											nolabel="1" />
									</group>
									<group>
										<field name="notes" placeholder="معلومات أخرى ..." />
									</group>
								</page>
								<page string="بيانات التواصل">
									<group>
										<group string="بيانات التواصل">
											<field name="mobile_phone" attrs="{'required': 1}" />
											<field name="work_location" attrs="{'required': 1}" />
											<field name="work_email" widget="email" attrs="{'required': 1}" />
											<field name="work_phone" />
											<field name="coach_id" invisible="1" />
											<field name="manager" groups="base.group_no_one" />
										</group>
									</group>
								</page>
								<page string="مستويات التعليم">
									<field name="education_level_ids">
									</field>
								</page>
								<page string="بيانات العمل">
									<group>
										<group string="بيانات العمل">
											<field name="department_id" on_change="onchange_department_id(department_id)" />
											<field name="dep_Side" options="{'no_create': True}" />
											<field name="dep_city" options="{'no_create': True}" />
											<field name="job_id"
												attrs="{'readonly': 1, 'invisible': [('employee_state','!=', 'employee')]}" />
											<field name="type_id"
												attrs="{'readonly': 1, 'invisible': [('employee_state','!=', 'employee')]}" />
											<field name="parent_id" string="المدير المباشر" />
											<field name="service_duration" attrs="{'readonly': 1}" />
											<field name="promotion_duration" attrs="{'readonly': 1}" />
											<field name="external_decision" />
											<field name="is_member" />
										</group>
										<group string="خصائص أخرى">
											<field name="user_id"
												attrs="{'readonly': 1, 'invisible': [('employee_state','!=', 'employee')]}" />
											<field name="recruiter" widget="selection" />
											<field name="recruiter_date" />
											<field name="begin_work_date" />
											<field name="calendar_id" />
											<field name="insurance_type" />
											<field name="medic_exam" string="تاريخ الفحص الطبي" />
											<field name="vehicle" />
											<field name="vehicle_distance" />
										</group>
									</group>
								</page>
								<page string="بيانات البنك">
									<group>
										<group string="بيانات البنك">
											<field name="address_home_id" invisible="1" />
											<field name="bank_account_id" invisible="1" />
											<field name="bank_account_ids" options="{'no_create': True}">
												<tree create="false" delete="false">
													<field name="acc_number" />
													<field name="bank_name" string="البنك" />
													<field name="currency_id" />
													<field name="account_opening_date" />
													<field name="is_deposit" />

												</tree>
											</field>
										</group>
									</group>
									<group name="active_group" invisible="1" />
								</page>

								<page string="البدلات">
									<field name="allowance_ids">
										<tree editable="buttom">
											<field name="allowance_id" />
											<field name="amount" />
										</tree>
									</field>
								</page>
								<!-- TODO: dont delete it used by borni in payroll we can discuss 
									about it after -->
								<page string="بيانات الراتب ">
									<group>
										<field name="payroll_structure_id" />
										<field name="wage" />
										<field name="degree_id" />
									</group>
								</page>

								<page string="أرصدة الاجازات والترقيات">
									<separator string="أرصدة الاجازات" />
									<field name="holidays_balance"
										domain="[('period_id.date_to','&lt;=',context_today())]">
										<tree string="أرصدة الاجازات ">
											<field name="holiday_status_id" />
											<field name="entitlement_name" />
											<field name="holidays_available_stock" />
											<field name="token_holidays_sum" />
											<field name="periode" />
										</tree>
									</field>
									<group>
										<field name="compensation_stock" readonly="1" class="oe_inline" />
									</group>
									<separator string="سِجل التعيينات" />
									<field name="promotions_history" readonly="1">
										<tree string="سِجل التعيينات">
											<field name="appoint_type" />
											<field name="salary_grid_id" />
											<field name="date_from" />
											<field name="date_to" />
											<field name="balance" />
										</tree>
									</field>

								</page>
								<page string="الحسميات">
								</page>

								<page string="العقوبات">
									<field name='sanction_ids' string="العقوبات" readonly="1">
										<tree string="سجل العقوبات">
											<field name="employee_id" />
											<field name="type_sanction" />

											<field name="days_number" />
											<field name="amount" />
											<field name="mast" />
											<field name="deduction" />
											<field name="state_sanction" />
											<field name="state" />
										</tree>
									</field>
								</page>
								<page string="سجل الاجراءات" readonly='True'>

									<field name='history_ids' readonly="1">
										<tree string="سجل الاجراءات">
											<field name="job_id" />
											<field name="grade_id" />
											<field name="number" />
											<field name="dep_Side" />
											<field name="department_id" />
											<field name="type" />
											<field name="date" />
											<field name="num_decision" />
											<field name="date_decision" />
										</tree>
									</field>

								</page>

							</notebook>
						</sheet>
						<div class="oe_chatter">
							<field name="message_follower_ids" widget="mail_followers" />
							<field name="message_ids" widget="mail_thread" />
						</div>
					</form>

				</xpath>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_employee_request">
			<field name="name">طلبات تسجيل موظف</field>
			<field name="res_model">hr.employee</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('employee_state','!=','employee')]</field>
		</record>
		<record id="action_employee_request_tree" model="ir.actions.act_window.view">
			<field name="view_mode">tree</field>
			<field name="view_id" ref="view_employee_request_tree" />
			<field name="act_window_id" ref="action_employee_request" />
		</record>
		<record id="action_employee_request_form" model="ir.actions.act_window.view">
			<field name="view_mode">form</field>
			<field name="view_id" ref="view_employee_request_form" />
			<field name="act_window_id" ref="action_employee_request" />
		</record>

		<menuitem id="employee_request_menu" name="طلبات تسجيل موظف"
			groups="smart_hr.group_employee_request" sequence="2" parent="hr_root_employees"
			action="action_employee_request" />



		<record id="hr_contract.hr_hr_employee_view_form2" model="ir.ui.view">
			<field name="name">hr.hr.employee.view.form2</field>
			<field name="model">hr.employee</field>
			<field name="arch" type="xml">
				<form>

				</form>
			</field>
		</record>

	</data>
</openerp>
