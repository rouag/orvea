<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>


		<!-- الموظفون -->

		<record id="view_employee_tree" model="ir.ui.view">
			<field name="name">hr.employee.tree</field>
			<field name="model">hr.employee</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="بيانات موظف">
					<field name="name" />
					<field name="number" />
					<field name="employee_state" />
				</tree>
			</field>
		</record>




		<record model="ir.actions.act_window" id="action_hr_employee">
			<field name="name">الموظفون</field>
			<field name="res_model">hr.employee</field>
			<field name="view_mode">kanban,tree,form</field>
			<field name="domain">[('employee_state','=','employee')]</field>
		</record>

		<record id="hr_kanban_view_employees_inherit" model="ir.ui.view">
			<field name="name">hr.employee.kanaban.inherit</field>
			<field name="model">hr.employee</field>
			<field name="type">kanban</field>
			<field name="inherit_id" ref="hr.hr_kanban_view_employees" />
			<field name="arch" type="xml">
				<data>
					<field name="name" position="after">
						<field name="space" />
						<field name="father_middle_name" />
						<field name="space" />
						<field name="father_name" />
						<field name="family_name" />
					</field>
				</data>
			</field>
		</record>

		<record id="action_hr_employee_kanban" model="ir.actions.act_window.view">
			<field name="view_mode">kanban</field>
			<field name="view_id" ref="hr_kanban_view_employees_inherit" />
			<field name="act_window_id" ref="action_hr_employee" />
		</record>
		<record id="action_hr_employee_tree" model="ir.actions.act_window.view">
			<field name="view_mode">tree</field>
			<field name="view_id" ref="view_employee_tree" />
			<field name="act_window_id" ref="action_hr_employee" />
		</record>

		<record id="action_hr_employee_form" model="ir.actions.act_window.view">
			<field name="view_mode">form</field>
			<field name="view_id" ref="hr.view_employee_form" />
			<field name="act_window_id" ref="action_hr_employee" />
		</record>





		<menuitem id="hr_employee_menu" name="الموظفون" sequence="10"
			parent="hr_root_employees" action="action_hr_employee" groups="smart_hr.group_employees" />




		<!-- بياناتي -->
		<record id="view_employee_mine_form" model="ir.ui.view">
			<field name="name">hr.employee.form</field>
			<field name="model">hr.employee</field>
			<field name="arch" type="xml">
				<form string="بياناتي" create='0' delete='0' duplicate='0'>

					<sheet>
						<div name="button_box" invisible="1" />
						<field name="image" widget="image" class="oe_avatar"
							options="{&quot;preview_image&quot;:&quot;image_medium&quot;}" />
						<div>

							<group col="13" class='smart_td_label_center'>
								<label name="name" string="الاسم" colspan="3" />
								<label name="father_name" string="إسم الأب" colspan="3" />
								<label name="grandfather_name" string="اسم الجد" colspan="3" />
								<label name="grandfather2_name" string="اسم الجد الثاني"
									colspan="3" />
								<label name="family_name" string="الاسم العائلي" colspan="1" />
							</group>
							<group col="13">
								<field name="name" nolabel="1" colspan="2" />
								<field name="father_middle_name" nolabel="1" />
								<field name="father_name" nolabel="1" colspan="2" />
								<field name="grandfather_middle_name" nolabel="1" />
								<field name="grandfather_name" nolabel="1" colspan="2" />
								<field name="grandfather2_middle_name" nolabel="1" />
								<field name="grandfather2_name" nolabel="1" colspan="2" />
								<field name="family_name" nolabel="1" colspan="2" />
							</group>

							<label for="number" class="oe_edit_only" />
							<h1>
								<field name="number" placeholder="الرقم الوظيفي" attrs="{'required': 1}"
									class="oe_smart_inline" />

							</h1>
						</div>
						<notebook>
							<page string="بيانات شخصية">
								<group>
									<group string="بيانات شخصية">

										<field name="country_id" options='{"no_open": True, "no_create": True}'
											attrs="{'required': 1}" />

										<field name="identification_id" groups="base.group_hr_user"
											attrs="{'required': 1}" />
										<field name="passport_id" groups="base.group_hr_user"
											attrs="{'required': 1}" />
										<field name="is_resident" attrs="{'required': 1}" />
										<field name="education_level" options='{"no_open": True, "no_create": True}'
											attrs="{'required': 1}" />

									</group>
									<group string="الحالة">

										<field name="gender" attrs="{'required': 1}" />
										<field name="religion_state" attrs="{'required': 1}" />
										<field name="marital" attrs="{'required': 1}" />
									</group>

									<group string="الميلاد">
										<field name="birthday" attrs="{'required': 1}" />

									</group>

									<group string="المرفقات">
										<field name="attachments" widget="many2many_binary"
											nolabel="1" />
									</group>
									<field name="notes" placeholder="معلومات أخرى ..."
										colspan="4" />
								</group>
							</page>
							<page string="بيانات التواصل">
								<group>
									<group string="بيانات التواصل">
										<field name="mobile_phone" attrs="{'required': 1}" />
										<field name="work_location" attrs="{'required': 1}" />
										<field name="work_email" widget="email" attrs="{'required': 1}" />
										<field name="work_phone" />
										<field name="coach_id" invisible="1" />
									</group>
								</group>
							</page>
							<page string="بيانات العمل">
								<group>
									<group string="بيانات العمل">
										<field name="department_id" on_change="onchange_department_id(department_id)" />
										<field name="job_id"
											attrs="{'readonly': 1, 'invisible': [('employee_state','!=', 'employee')]}" />
										<field name="parent_id" />
										<field name="service_duration" attrs="{'readonly': 1}" />
										<field name="promotion_duration" attrs="{'readonly': 1}" />

										<field name="external_decision" />
										<field name="traveling_ticket" />
										<field name="traveling_family_ticket" />

									</group>
									<group string="خصائص أخرى">
										<field name="user_id"
											attrs="{'readonly': 1, 'invisible': [('employee_state','!=', 'employee')]}" />
										<field name="recruiter" widget="selection" />

									</group>
								</group>
							</page>
							<page string="بيانات البنك">
								<group>
									<group string="بيانات البنك">
										<field name="address_home_id" invisible="1" />
										<field name="bank_account_id" />
									</group>
								</group>
								<group name="active_group" invisible="1" />
							</page>

							<page string="البدلات">
								<field name="allowance_ids">
									<tree editable="buttom">
										<field name="allowance_id" />
										<field name="amount" />
									</tree>
								</field>
							</page>
							<page string="أرصدة الاجازات والترقيات">
								<field name="holidays_balance" domain="[('period_id.date_to','>',context_today())]">
									<tree string="أرصدة الاجازات ">
										<field name="holiday_status_id" />
										<field name="entitlement_name" />
										<field name="holidays_available_stock" />
										<field name="token_holidays_sum" />
										<field name="periode" />
										<field name="period_id" invisible="1" />

									</tree>
								</field>
								<field name="promotions_history" readonly="1">
									<tree string="أرصدة الترقيات">
										<field name="salary_grid_id" />
										<field name="date_from" />
										<field name="date_to" />
										<field name="balance" />
									</tree>
								</field>
								<group>
									<field name="compensation_stock" />
								</group>

							</page>
							<page string="الحسميات">
							</page>
							<page string="الورديات">
							</page>
							<page string="بيان الخدمة">
							</page>

						</notebook>
					</sheet>
					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"
							groups="base.group_user" />
						<field name="message_ids" widget="mail_thread" />
					</div>
				</form>
			</field>
		</record>

		<record id="ir_actions_button_my_info" model="ir.actions.server">
			<field name="sequence" eval="5" />
			<field name="state">code</field>
			<field name="type">ir.actions.server</field>
			<field name="model_id" ref="model_hr_employee" />
			<field name="code">action=pool.get('hr.employee').button_my_info(cr,uid,None,)
			</field>
			<field name="condition">True</field>
			<field name="name">بياناتي</field>
		</record>

		<menuitem name="بياناتي" id="hr_employee_mine_menu" parent="hr_root_employees"
			sequence="11" action="ir_actions_button_my_info" />



		<!-- طلبات بيانات موظف -->

		<record id="view_employee_request_tree" model="ir.ui.view">
			<field name="name">hr.employee.request.tree</field>
			<field name="model">hr.employee</field>
			<field name="type">tree</field>
			<field name="inherit_id" ref="hr.view_employee_tree" />
			<field name="arch" type="xml">
				<xpath expr="/tree" position='replace'>
					<tree string="طلبات بيانات موظف">
						<field name="name" />
						<field name="employee_state" />
					</tree>
				</xpath>
			</field>
		</record>

		<record id="view_employee_request_form" model="ir.ui.view">
			<field name="name">hr.employee.request.form</field>
			<field name="model">hr.employee</field>
			<field name="sequence" eval="100" />
			<field name="inherit_id" ref="hr.view_employee_form" />
			<field name="arch" type="xml">
				<xpath expr="/form" position='replace'>
					<form string="طلبات بيانات موظف">
						<header>
							<button name="action_send" string="إرسال للإعتماد" type="object"
								groups="smart_hr.group_employee_request" attrs="{'invisible': [('employee_state', '!=', 'new')]}" />
							<button name="action_confirm" string="موافقة" type="object"
								groups="smart_hr.group_employee_registration" attrs="{'invisible': [('employee_state', '!=', 'waiting')]}" />
							<button name="action_cancel" string="إلغاء" type="object"
								groups="smart_hr.group_employee_request" attrs="{'invisible': [('employee_state', '!=', 'waiting')]}" />
							<button name="action_refuse" string="رفض" type="object"
								groups="smart_hr.group_employee_registration" attrs="{'invisible': [('employee_state', '!=', 'waiting')]}" />
							<field name="employee_state" widget="statusbar"
								statusbar_visible="new,waiting,done,refused" />
						</header>

						<sheet>
							<div name="button_box" invisible="1" />
							<field name="image" widget="image" class="oe_avatar"
								options="{&quot;preview_image&quot;:&quot;image_medium&quot;}" />
							<div>
								<group col="13" class='smart_td_label_center'>
									<label name="name" string="الاسم" colspan="3" />
									<label name="father_name" string="إسم الأب" colspan="3" />
									<label name="grandfather_name" string="اسم الجد" colspan="3" />
									<label name="grandfather2_name" string="اسم الجد الثاني"
										colspan="3" />
									<label name="family_name" string="الاسم العائلي" colspan="1" />
								</group>
								<group col="13">
									<field name="name" nolabel="1" colspan="2" />
									<field name="father_middle_name" nolabel="1" />
									<field name="father_name" nolabel="1" colspan="2" />
									<field name="grandfather_middle_name" nolabel="1" />
									<field name="grandfather_name" nolabel="1" colspan="2" />
									<field name="grandfather2_middle_name" nolabel="1" />
									<field name="grandfather2_name" nolabel="1" colspan="2" />
									<field name="family_name" nolabel="1" colspan="2" />
								</group>

								<label for="number" class="oe_edit_only" />
								<h1>
									<field name="number" placeholder="الرقم الوظيفي" attrs="{'required': 1}"
										class="oe_smart_inline" />

								</h1>
							</div>
							<notebook>
								<page string="بيانات شخصية">
									<group>
										<group string="بيانات شخصية">
											<field name="country_id" options='{"no_open": True, "no_create": True}'
												attrs="{'required': 1}" />

											<field name="identification_id" groups="base.group_hr_user"
												attrs="{'required': 1}" />
											<field name="identification_date" groups="base.group_hr_user" />
											<field name="identification_place" groups="base.group_hr_user" />

											<field name="passport_id" groups="base.group_hr_user"
												attrs="{'required': 1}" />
											<field name="is_resident" attrs="{'required': 1}" />
											<field name="education_level" options='{"no_open": True, "no_create": True}'
												attrs="{'required': 1}" />

										</group>
										<group string="الحالة">

											<field name="gender" attrs="{'required': 1}" />
											<field name="religion_state" />
											<field name="marital" attrs="{'required': 1}" />
										</group>

										<group string="الميلاد">
											<field name="birthday" attrs="{'required': 1}" />

										</group>

										<group string="المرفقات">
											<field name="attachments" widget="many2many_binary"
												nolabel="1" />
										</group>
										<field name="notes" placeholder="معلومات أخرى ..."
											colspan="4" />
									</group>
								</page>
								<page string="بيانات التواصل">
									<group>
										<group string="بيانات التواصل">
											<field name="mobile_phone" attrs="{'required': 1}" />
											<field name="work_location" attrs="{'required': 1}" />
											<field name="work_email" widget="email" attrs="{'required': 1}" />
											<field name="work_phone" />
											<field name="coach_id" invisible="1" />
										</group>
									</group>
								</page>
								<page string="بيانات العمل">
									<group>
										<group string="بيانات العمل">
											<field name="department_id" on_change="onchange_department_id(department_id)" />
											<field name="job_id"
												attrs="{'readonly': 1, 'invisible': [('employee_state','!=', 'employee')]}" />
											<field name="parent_id" />
											<field name="service_duration" attrs="{'readonly': 1}" />
											<field name="promotion_duration" attrs="{'readonly': 1}" />
											<field name="external_decision" />
										</group>
										<group string="خصائص أخرى">
											<field name="user_id"
												attrs="{'readonly': 1, 'invisible': [('employee_state','!=', 'employee')]}" />
											<field name="recruiter" widget="selection" />
											<field name="recruiter_date" />
											<field name="begin_work_date" />
											<field name="calendar_id" />

										</group>
									</group>
								</page>
								<page string="بيانات البنك">
									<group>
										<group string="بيانات البنك">
											<field name="address_home_id" invisible="1" />
											<field name="bank_account_id" />
										</group>
									</group>
									<group name="active_group" invisible="1" />
								</page>

								<page string="البدلات">
									<field name="allowance_ids">
										<tree editable="buttom">
											<field name="allowance_id" />
											<field name="amount" />
										</tree>
									</field>
								</page>
								<page string="أرصدة الاجازات والترقيات">
									<field name="holidays_balance"
										domain="[('period_id.date_to','&lt;=',context_today())]">
										<tree string="أرصدة الاجازات ">
											<field name="holiday_status_id" />
											<field name="entitlement_name" />
											<field name="holidays_available_stock" />
											<field name="token_holidays_sum" />
											<field name="periode" />
										</tree>
									</field>
									<field name="promotions_history" readonly="1">
										<tree string="أرصدة الترقيات">
											<field name="salary_grid_id" />
											<field name="date_from" />
											<field name="date_to" />
											<field name="balance" />
										</tree>
									</field>
									<group>
										<field name="compensation_stock" />
									</group>
								</page>
								<page string="الحسميات">
								</page>
								<page string="الورديات">
								</page>
								<page string="بيان الخدمة">
								</page>

							</notebook>
						</sheet>
						<div class="oe_chatter">
							<field name="message_follower_ids" widget="mail_followers"
								groups="base.group_user" />
							<field name="message_ids" widget="mail_thread" />
						</div>
					</form>

				</xpath>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_employee_request">
			<field name="name">طلبات تسجيل موظف</field>
			<field name="res_model">hr.employee</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('employee_state','!=','employee')]</field>
		</record>
		<record id="action_employee_request_tree" model="ir.actions.act_window.view">
			<field name="view_mode">tree</field>
			<field name="view_id" ref="view_employee_request_tree" />
			<field name="act_window_id" ref="action_employee_request" />
		</record>
		<record id="action_employee_request_form" model="ir.actions.act_window.view">
			<field name="view_mode">form</field>
			<field name="view_id" ref="view_employee_request_form" />
			<field name="act_window_id" ref="action_employee_request" />
		</record>

		<menuitem id="employee_request_menu" name="طلبات تسجيل موظف"
			groups="smart_hr.group_employee_request" sequence="1" parent="hr_root_employees"
			action="action_employee_request" />




	</data>
</openerp>
