<?xml version="1.0" encoding="utf-8" ?>
<openerp>
    <data>

        <!--
            Promotion Decision
        -->
        <record id="view_form_hr_promotions" model="ir.ui.view">
            <field name="name">hr.promotion.form</field>
            <field name="model">hr.promotion</field>
            <field name="arch" type="xml">
                <form string="محضر ترقية ">
                    
					<header>
						<button name="button_confirmed" string="تدقيق" type="object" states="draft" />
						<button name="button_transfer_manager" string="موافقة و إرسال " type="object" states="confirmed" />
						<button name="button_transfer_minister" string="موافقة و إرسال " type="object" states="manager" />
						<button name="button_transfer_hrm" string="موافقة و إرسال " type="object" states="minister" />
						<button name="button_done" string="موافقة " type="object" states="hrm" />
						<button name="button_refused" string="رفض " type="object"   attrs="{'invisible': [('state', '=', 'draft'),('state', '=', 'done')]}" />
						<button name="button_conceled" string="إلغاء " type="cancel"  attrs="{'invisible': [('state', '=', 'draft'),('state', '=', 'done')]}"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,confirmed,manager,minister,hrm,done,refuse,cancel"/> 
                     </header> 
                    <sheet>
                    <group>
                            <field name="name" readonly="1"/>
                            <field name="date" readonly="1"/>
                        </group>
                        
	                       
	                       <notebook>
							<page string="قائمة الموظفين المؤهلين للترقية">
	                       <field name="employee_promotion_line_ids">
									<tree editable="buttom" create = "0" delete="0" >
										<field name="employee_id" readonly="1"/>
										<field name="demande_promotion_id" readonly="1"/>
										<field name="old_job_id" readonly="1"/>
										<field name="old_number_job" readonly="1"/>
										<field name="emp_department_old_id" readonly="1"/>
										<field name="emp_grade_id_old" readonly="1" />
										<field name="point_seniority" readonly="1"/>
										<field name="point_education" readonly="1"/>
										<field name="point_training" readonly="1"/>
										<field name="point_functionality" readonly="1"/>
										<field name="sum_point" readonly="1"/>
										<field name="etape" invisible="1" />
										<field name="new_job_id" domain="[('state','=','unoccupied')]" attrs="{'invisible': [('etape', '=', 'draft')]}"/>
										<field name="new_number_job" attrs="{'invisible': [('etape', '=', 'draft')]}"/>
										<field name="emp_grade_id_new"  attrs="{'invisible': [('etape', '=', 'draft')]}"/>
										<field name="etape" readonly="1" />
										<button name="job_reserved" string="حجز" type="object" attrs="{'invisible': [('etape', '!=', 'confirmed')]}" />
										<button name="job_confirmed" string="موافقة" type="object" attrs="{'invisible': [('etape', '!=', 'reserved')]}" />
										<button name="job_refused" string="رفض" type="object" attrs="{'invisible': [('etape', '!=', 'reserved')]}" />
										
									</tree>
								</field>
	                       </page>
	                       </notebook>
                       
                    </sheet>
                </form>
            </field>
        </record>
        <record id="view_tree_hr_promotions" model="ir.ui.view">
            <field name="name">hr.promotion.tree</field>
            <field name="model">hr.promotion</field>
            <field name="arch" type="xml">
                <tree string="قرارات الترقيات" class="oe_tree_view">
                    <field name="name"/>
                    <field name="date"/>
                </tree>
            </field>
        </record>
        <record id="view_search_hr_promotion" model="ir.ui.view">
            <field name="name">hr.promotion.search</field>
            <field name="model">hr.promotion</field>
            <field name="arch" type="xml">
                <search string="قرارات الترقيات">
                    <field name="name" required="1"/>
                    <field name="date" required="1"/>
                </search>
            </field>
        </record>
        <record id="action_hr_promotions" model="ir.actions.act_window">
            <field name="name">قرارات الترقيات</field>
            <field name="res_model">hr.promotion</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'readonly_by_pass': True}</field>
            <field name="help" type="html">
              	<p class="oe_view_nocontent_create">أنقر هنا للإضافة</p>
            </field>
        </record>
        
        
        
        <record model="ir.actions.act_window.view" id="action_hr_promotions_tree">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_tree_hr_promotions"/>
            <field name="act_window_id" ref="action_hr_promotions"/>
        </record>

        <record model="ir.actions.act_window.view" id="action_hr_promotions_form_view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_form_hr_promotions"/>
            <field name="act_window_id" ref="action_hr_promotions"/>
        </record>
        <menuitem id="menu_hr_promotions" action="action_hr_promotions" parent="hr_root_promotion" name="قرارات الترقيات" sequence="2"/>
<!--           <menuitem id="menu_hr_promotion"  parent="hr_root_promotion" name="قرارات الترقيات" sequence="1"/> -->


	<record id="promotion_type_form" model="ir.ui.view">
			<field name="name">hr.promotion.type.form</field>
			<field name="model">hr.promotion.type</field>
			<field name="arch" type="xml">
				<form string="أنواع الترقيات">
					<sheet>
						<group>
							<group>
								<field name="name" />
								<field name="code" />
							</group>
						</group>
					</sheet>
				</form>
			</field>
		</record>

		<record id="promotion_type_tree" model="ir.ui.view">
			<field name="name">hr.promotion.type.tree</field>
			<field name="model">hr.promotion.type</field>
			<field name="arch" type="xml">
				<tree string="أنواع الترقيات">
					<field name="name" />
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_promotion_type">
			<field name="name">أنواع الترقيات</field>
			<field name="res_model">hr.promotion.type</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>
	<menuitem id="menu_hr_promotions_type_configuration"  parent="hr_root_promotion" name="الإعدادات" sequence="3"/>	
	 <menuitem id="menu_hr_promotions_type" action="action_promotion_type" parent="menu_hr_promotions_type_configuration" name="أنواع الترقيات" sequence="4"/>
    </data>
</openerp>